---
type: rule
title: Do you apply CRM 2015 update rollup 1 before upgrading to 2016
uri: do-you-apply-crm-2015-update-rollup-1-before-upgrading-to-2016
created: 2016-01-28T04:15:58.0000000Z
authors:
- id: 1
  title: Adam Cogan

---



<span class='intro'> Make sure CRM 2015 update rollup 1 has been applied before upgrading to CRM 2016 </span>

<dl class="ssw15-rteElement-ImageArea"><img src="/PublishingImages/updaterollup1.png" alt="" style="margin&#58;5px;width&#58;758px;" />&#160;<strong>Figure&#58; &#160;​version after applying CRM 2015 update rollup 1</strong><dl class="ssw15-rteElement-ImageArea"><dl class="ssw15-rteElement-ImageArea"><strong>Note&#58;</strong> You might come accross the error below while applying CRM 2015 update rollup 1</dl><dl class="ssw15-rteElement-ImageArea"><table cellspacing="0" width="100%" class="ssw15-rteTable-default"><tbody><tr><td class="ssw15-rteTable-default" style="width&#58;100%;"><div>Database update install failed for orgId = 011d5962-3475-4df9-a123-c3ecaf88b048. &#160;Continuing with other orgs. &#160;Exception&#58; System.Reflection.TargetInvocationException&#58; Exception has been thrown by the target of an invocation. ---&gt; System.Data.SqlClient.SqlException&#58; The current transaction cannot be committed and cannot support operations that write to the log file. Roll back the transaction.</div><div>Uncommittable transaction is detected at the end of the batch. The transaction is rolled back.</div></td></tr></tbody></table></dl><dl class="ssw15-rteElement-ImageArea"><strong>Solution&#58;</strong><dl class="ssw15-rteElement-ImageArea"><ol><li><span style="background-color&#58;initial;">​Make a backup of the file MetadataDiffs.xml from “C&#58;\Program Files\Microsoft Dynamics &#160; &#160; &#160; &#160; &#160; &#160; &#160;&#160;CRM\Setup\Serviceability\Latest\Actions_Org\Install”</span><br></li><li><span style="background-color&#58;initial;">&#160;Open the file MetadataDiffs.xml from “C&#58;\Program Files\Microsoft Dynamics CRM\Setup\Serviceability\Latest\Actions_Org\Install”</span></li><li><span style="background-color&#58;initial;"></span><span style="background-color&#58;initial;">&#160;Rem</span><span style="line-height&#58;20px;background-color&#58;initial;">ove the entry about the index “cndx_BusinessDataLocalizedLabel”. This is found at the very end of the file&#58;</span><table cellspacing="0" width="100%" class="ssw15-rteTable-default"><tbody><tr><td class="ssw15-rteTable-default" style="width&#58;100%;">​&#160; &#160;&lt;index Name=&quot;cndx_BusinessDataLocalizedLabel&quot;&gt;<br>&#160; &#160; &#160;&lt;EntityId&gt;4ba1569e-3c9c-4d9f-99ea-b61fb08d7f97&lt;/EntityId&gt;<br>&#160; &#160; &#160;&lt;IsClustered&gt;1&lt;/IsClustered&gt;<br>&#160; &#160; &#160;&lt;IsUnique&gt;1&lt;/IsUnique&gt;<br>&#160; &#160; &#160;&lt;IndexType&gt;6&lt;/IndexType&gt;<br>&#160; &#160; &lt;IsPrimaryKey&gt;0&lt;/IsPrimaryKey&gt;<br>&#160; &#160; &#160;&lt;attributes&gt;<br>&#160; &#160; &#160; &#160;&lt;attribute AttributeId=&quot;d88e1df3-b5b3-42f3-9ffa-007f22951dd4&quot; IsSystemManaged=&quot;1&quot; order=&quot;0&quot; /&gt;<br>&#160; &#160; &#160; &#160;&lt;attribute AttributeId=&quot;bb23d3c8-8d18-40d3-9519-66101a8cae34&quot; IsSystemManaged=&quot;1&quot; order=&quot;1&quot; /&gt;<br>&#160; &#160; &#160; &#160;&lt;attribute AttributeId=&quot;976e1053-5faa-4c3f-be6e-669acfec9d5a&quot; IsSystemManaged=&quot;1&quot; order=&quot;2&quot; /&gt;<br>&#160; &#160; &#160; &#160;&lt;attribute AttributeId=&quot;e81341c4-4d4a-4977-98eb-6597fcde2cc4&quot; IsSystemManaged=&quot;1&quot; order=&quot;3&quot; /&gt;<br>&#160; &#160; &#160;&lt;/attributes&gt;<br>&#160; &#160;&lt;/index&gt;</td></tr></tbody></table></li><li><span style="line-height&#58;20px;background-color&#58;initial;">Close Deployment Manager</span><br></li><li><span style="background-color&#58;initial;">&#160;Start Deployment Manager</span></li><li><span style="background-color&#58;initial;"></span><span style="background-color&#58;initial;">&#160;Start the organization update from Deployment manager.</span></li><li><span style="background-color&#58;initial;">Run the following query on the organization DB to manually recreate the index<br></span><table cellspacing="0" width="100%" class="ssw15-rteTable-default"><tbody><tr><td class="ssw15-rteTable-default" style="width&#58;100%;">​IF EXISTS (SELECT * FROM sys.indexes WHERE name = 'cndx_BusinessDataLocalizedLabel' AND OBJECT_NAME(object_id) = 'BusinessDataLocalizedLabelBase') DROP INDEX [cndx_BusinessDataLocalizedLabel] ON [BusinessDataLocalizedLabelBase];<br>IF NOT EXISTS (SELECT * FROM sys.indexes WHERE NAME = 'cndx_BusinessDataLocalizedLabel' AND OBJECT_NAME(object_id) = 'BusinessDataLocalizedLabelBase')<br>BEGIN TRY<br>&#160;CREATE UNIQUE CLUSTERED INDEX [cndx_BusinessDataLocalizedLabel] ON [BusinessDataLocalizedLabelBase]([ObjectId] ASC, [ObjectIdTypeCode] ASC, [ObjectColumnNumber] ASC, [LanguageId] ASC) WITH (FILLFACTOR = 80, MAXDOP = 4, SORT_IN_TEMPDB = ON, ONLINE = ON)<br>END TRY<br>BEGIN CATCH<br>&#160;CREATE UNIQUE CLUSTERED INDEX [cndx_BusinessDataLocalizedLabel] ON [BusinessDataLocalizedLabelBase]([ObjectId] ASC, [ObjectIdTypeCode] ASC, [ObjectColumnNumber] ASC, [LanguageId] ASC) WITH (FILLFACTOR = 80, MAXDOP = 4, SORT_IN_TEMPDB = ON)<br>END CATCH​</td></tr></tbody></table></li><li><span style="background-color&#58;initial;">​Restore the file MetadataDiffs.xml to its original state using the backup taken at step 1.</span></li></ol></dl><dl class="ssw15-rteElement-ImageArea">Source from&#160;<a href="https&#58;//www.remotingcoders.com/Blogsite/Lists/Posts/Post.aspx?ID=83&amp;AspxAutoDetectCookieSupport=1">https&#58;//www.remotingcoders.com/Blogsite/Lists/Posts/Post.aspx?ID=83&amp;AspxAutoDetectCookieSupport=1​​</a></dl></dl></dl></dl>



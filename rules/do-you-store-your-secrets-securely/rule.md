---
type: rule
title: Do you store your secrets securely?
uri: do-you-store-your-secrets-securely
created: 2016-04-28T19:19:40.0000000Z
authors:
- id: 1
  title: Adam Cogan
- id: 32
  title: Mehmet Ozdemir
- id: 34
  title: Brendan Richards
- id: 63
  title: Andrew Lean

---



<span class='intro'> <p class="p1">Most systems will have variables that need to be stored securely; OpenId shared secret keys, connection strings and API tokens to name a few. <br></p><p class="p1">These secrets <strong>must not</strong> be stored in source control in plain text – it is insecure by nature, and basically means that it is sitting on everyone’s laptop, including the designers and that one manager guy who wrote hello world in 1996 and wants to look at the code.</p> </span>

<p>There are many options for managing secrets in a secure way.<br></p><dd class="ssw15-rteElement-FigureBad">Bad Practice​​<br><br></dd><h3 class="ssw15-rteElement-H3">Store production&#160;passwords in source control protected with the <a href="https&#58;//msdn.microsoft.com/en-us/library/zhhddkxy.aspx">ASP.NET IIS Registration Tool.&#160;</a></h3><p>Pros&#58;<br></p><ul><li>Minimal change to existing process – no need for <a href="https&#58;//msdn.microsoft.com/en-us/library/ms995355.aspx">DPAPI </a>or a dedicated Release&#160;Management (RM)&#160;tool.<br></li><li>Simple and easy to understand<br></li></ul>Cons&#58;<br><ul><li>Need to manually give the app pool identity ability to read the default RSA key container.<br></li><li>Difficult to manage production and non-production config settings<br></li><li>Developers can easily decrypt and access the production password.<br></li><li>Manual transmission of the password from the key store to the encrypted config file.<br></li></ul><br><div><strong>Overall rating&#58; 2/10</strong><br>&#160;<h3 class="ssw15-rteElement-H3">Use Windows Identity instead of username/ password.</h3>Pros&#58;<br><ul><li>Minimal change to existing process – no need for DPAPI or a dedicated RM tool.</li><li> Simple and easy to understand</li></ul>Cons&#58;<br><ul><li>​Difficult to manage production and non-production config settings</li><li>Not generally applicable to all secured resources.&#160;</li><li>Can hit firewall snags with Kerberos and AD ports</li><li>Vulnerable to DOS attacks related to password lockout policies<br></li><li>Has key-person reliance on network admin</li></ul>Overall rating&#58; 4/10<br>&#160;<h3 class="ssw15-rteElement-H3"><a href="https&#58;//docs.microsoft.com/en-us/aspnet/identity/overview/features-api/best-practices-for-deploying-passwords-and-other-sensitive-data-to-aspnet-and-azure">Use External Configuration Files​​​</a><div class="ms-rte-pasteremove" style="width&#58;1px;height&#58;1px;overflow&#58;hidden;"><span style="font-size&#58;11pt;font-family&#58;calibri, sans-serif;">https&#58;//docs.microsoft.com/en-us/aspnet/identity/overview/features-api/best-practices-for-deploying-passwords-and-other-sensitive-data-to-aspnet-and-azure<br>https&#58;//docs.microsoft.com/en-us/aspnet/identity/overview/features-api/best-practices-for-deploying-passwords-and-other-sensitive-data-to-aspnet-and-azure<br>​https&#58;//docs.microsoft.com/en-us/aspnet/identity/overview/features-api/best-practices-for-deploying-passwords-and-other-sensitive-data-to-aspnet-and-azure<span lang="EN-AU"><a href="https&#58;//docs.microsoft.com/en-us/aspnet/identity/overview/features-api/best-practices-for-deploying-passwords-and-other-sensitive-data-to-aspnet-and-azure">Use External Configuration Files</a></span></span></div></h3>Pros&#58;<br><ul><li>Simple to understand and implement<br></li></ul>Cons&#58;<br><ul><li>​Makes setting up projects the first time very hard.</li><li>Easy to accidently check the external config file into source control.</li><li>Still need DPAPI to protect the external config file.</li><li>No clear way to manage the DevOps process for external config files.</li></ul>Overall rating&#58; 1/10<br></div><div><br></div><div><dd class="ssw15-rteElement-FigureGood">Good Practice​<br></dd><h3 class="ssw15-rteElement-H3">Use Octopus/ VSTS RM secret management​​​<br></h3>Pros&#58;<br><ul><li>Scalable and secure.<br></li><li>General industry best practice - great for organisations of most sizes below large corporate.<br></li></ul>Cons&#58;<br><ul><li>Password reset process is still manual<br></li><li>DPAPI still needed.<br></li></ul>Overall rating&#58; 8/10<br>&#160;<h3 class="ssw15-rteElement-H3">Use Enterprise Secret Management Tool – LastPas​​s/ Hashicorp Vault/ etc..</h3>Pros&#58;<br><ul><li>​​Enterprise grade – supports cryptographically strong passwords, auditing of secret access and dynamic secrets<br></li><li>Supports hierarchy​ of secrets<br></li><li>API interface for interfacing with other tools.<br></li><li>Password transmission can be done without a human in the chain.<br></li></ul><p>Cons&#58;<br></p><ul><li>​More complex to install and administer<br></li><li>​DPAPI still needed for config files at rest<br></li></ul>Overall rating&#58; 8/10<br><br></div>



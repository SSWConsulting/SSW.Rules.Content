---
type: rule
archivedreason: 
title: Do you choose the best method of authentication for your situation?
guid: 985df34b-7af9-4f03-a48a-cf7391411656
uri: do-you-choose-the-best-method-of-authentication-for-your-situation
created: 2016-05-02T18:27:29.0000000Z
authors:
- id: 81
  title: Jason Taylor
- id: 97
  title: Matt Goldman
- id: 1
  title: Adam Cogan
related: []

---


<p>​​​Authentication and authorisation are complicated, and it is risky to try and implement it yourself.  Use this rule for a guide on choosing the right service or framework for your situation.​​<br></p><dl class="image"><dt>​<img src="security-icon-ssw.jpg" alt="security-icon-ssw.jpg" style="width:80px;height:80px;" />​​<br></dt></dl>
<br><excerpt class='endintro'></excerpt><br>
<p class="ssw15-rteElement-P">​​Choosing the right 
   <a href="https://www.youtube.com/watch?v=i0d9iTmWIOw">authentication and authorisation</a> approach for your situation can be tricky. It is a multi-facted problem with many variables, and what seems like the right choice in one situation may not be in the other.<br></p><h3 class="ssw15-rteElement-H3">Start with the Questions​​<br></h3><p class="ssw15-rteElement-P"></p><ol><li>Scope - Is it an enterprise application for internal user or a consumer application for external use?<br></li><li>Social - Do you need to support 
      <a href="https://oauth.net/2/">OAuth2</a> or 
      <a href="https://openid.net/connect/">OIDC</a>?<br></li><li>MFA - Do you need to support 
      <a href="https://en.wikipedia.org/wiki/Multi-factor_authentication">MFA</a>?<br></li><li>Scope - Do you need to share the identity across multiple applications?</li><li>Volume - Do you have an estimate for how many users you need to support?​</li></ol><p></p><p class="ssw15-rteElement-P">Without the answers to these questions, it will be difficult to choose the right option. With the answers to these questions, you can use the flow charts below to help you choose the right solution.<br></p><h3 class="ssw15-rteElement-H3"> External Applications<br></h3><dl class="image"><dt> 
      <img src="Flow Chart - External.png" alt="Flow Chart - External.png" /> 
   </dt><dd>Figure: WebAPI (Public facing/consumer Application) - Authentication selection flow chart<br></dd></dl><p class="ssw15-rteElement-P">
   <b>Example Template to Customer​:</b><br></p><p class="ssw15-rteElement-GreyBox"> 
   <strong>Scenario:</strong><br>Scope - You are building a consumer facing service that will have multiple clients, including a <a href="https://docs.microsoft.com/en-us/archive/msdn-magazine/2013/november/asp-net-single-page-applications-build-modern-responsive-web-apps-with-asp-net">SPA​</a> and a mobile app. 
   <br>Social - You want to allow your users to sign up with their social identities (Google, Facebook, Twitter, etc.) but want to allow them to create an account with you if they don't have a social login or don't want to use it. 
   <br>All users will have the same level of access once logged in. 
   <br>Volume - You anticipate 20,000 active users. 
   <br>MFA - You would like to allow users to enable MFA. 
   <br><br><strong>Your choices:</strong><br><b>Option A </b><span class="ssw15-rteStyle-Highlight">(Recommended)</span> - Azure AD B2C<b></b> - B2C provides all of the functionality you need and is free for up to 50,000 monthly users.<b></b><br><b>Option B</b> - Auth0<b></b> - Auth0 will meet most of these requirements, however your volume of users will exceed the free tier and you don't need the additional functionality of the paid tier. 
   <br> 
   <strong>Option C</strong> - Identity Server 
   <b></b>- This would work but as it doesn't include MFA this would need to be provided via an additional service. Also due to your expected volume of users you would need to manage scaling for this yourself.<br> ​ </p><dd class="ssw15-rteElement-FigureGood"> 
   <strong>Good Example: The chosen solution meets the requirements and is highlighted as per <a href="/_layouts/15/FIXUPREDIRECT.ASPX?WebId=3dfc0e07-e23a-4cbb-aac2-e778b71166a2&TermSetId=07da3ddf-0924-4cd2-a6d4-a4809ae20160&TermId=ba07b0d2-ccce-4584-a636-f3a5d9bec2cf">Do you manage up?​</a><strong></strong></strong></dd>
<br> 
<h3 class="ssw15-rteElement-H3"> Internal Applications<br></h3><dl class="image"><dt>
      <img src="Flow Chart - Internal.png" alt="Flow Chart - Internal.png" />
   </dt><dd>Figure: WebAPI (Internal Enterprise Application) - Authentication selection flow chart</dd></dl><p class="ssw15-rteElement-P"><br></p><p class="ssw15-rteElement-P">
   <strong>Example Template to Customer:</strong><br></p><p class="ssw15-rteElement-GreyBox"> 
   <strong>Scenario:</strong><br>Scope - You have an internal enterprise application, which will support approximately 1,000 users. 
   <br>You already have Active Directory in place, and are syncing with an Azure AD tenant. 
   <br>Your users will need to access this application from anywhere. 
   <br>MFA - As per your company security policy, you must enforce MFA. 
   <br><br><strong>Your choices:</strong><br><strong class="ssw15-rteStyle-Highlight"></strong><b>Option A</b> <span class="ssw15-rteStyle-Highlight">(Recommended)</span> - ​Azure Active Directory - most of the infrastructure for this is already in place for you, and it already meets all your requirements. We would just need to wire up your application to it.<br><strong>Option B</strong> - Active Directory - while your users are already in AD, it doesn't give you MFA or access outside your network.<br><strong>Option C</strong> - Okta - this is an expensive option which, for this scenario, doesn't provide any advantages over Azure AD.<br> ​ </p><dd class="ssw15-rteElement-FigureGood"> 
   <strong>Good Example: The chosen solution meets the requirements without adding unnecessary additional costs<strong></strong></strong></dd> 
<div><br></div><div><br></div><div><strong>Note #1</strong>: All of the following options assume you are building an ASP.NET Core application, although the commercial options listed here provide libraries for most development languages, frameworks and platforms.<br><br><strong>Note #2</strong>: The information here is relevant as provided, but consider other factors that may impact your decision too. For example, cost may be a factor and saving money may be more important than the added benefits of higher cost options. Additionally, your situation may not fit neatly into one of the scenarios we have listed and may span multiple scenarios, in which case you may need to pick the option which caters to the broadest set of requirements (avoid 'mix and match').<br></div><div><br></div><br> 
<h3>ASP.NET Core Identity (simple and free)<br></h3><p>ASP.NET Core has some built in identity functionality that allows you to create users and roles, and manage the security of your web applications. It is extremely capable and can be used to support a broad number of scenarios. However, it is intended for use in simple web applications, and while it can be extended to support other clients, you will need to build and wire up a lot of the UI for these scenarios yourself. Your identity store will be limited to this one application, so your users will not be able to share this identity across multiple applications.<br><br></p><dd class="ssw15-rteElement-FigureGood"> Advantages​​:<br></dd><ul><li></li><li>Free</li><li>Easy to set up and use</li><li>Supports OAuth2/OIDC providers</li></ul><dd class="ssw15-rteElement-FigureBad"> Disadvantages​​:<br></dd><p></p><ul><li>It is recommended by Microsoft that for advanced requirements you don't use this on its own - so need to add one of the below</li><li>Does not scale well across multiple applications - so need to add one of the below<br></li><li>For anything other than an ASP.NET Core Web app (e.g. Angular, React or mobile), you have to build all UI yourself, such as: <span style="background-color:initial;">sign up, l</span><span style="background-color:initial;">og, p</span><span style="background-color:initial;">assword reset, e</span><span style="background-color:initial;">tc.</span></li></ul><p class="ssw15-rteElement-P"> 
   <strong>Use this option if...</strong> </p><p class="ssw15-rteElement-P"></p><ul><li>You need to add identity to a simple ASP.NETapplication​​<br></li></ul><p></p><h3 class="ssw15-rteElement-H3" style="background-color:initial;">​Identity Server (full control)</h3><p> 
   <a href="https://identityserver.io/">Identity Server 4</a> is a free and open source solution that is built on top of ASP.NET Core Identity. It has extensive support for a number of authentication and authorisation scenarios and supports multiple identity providers (OAuth2/OIDC) out of the box. Identity Server 4 extends ASP.NET Core Identity to natively support multiple client types and can be used as a single identity across multiple applications.</p><dd class="ssw15-rteElement-FigureGood"> Advantages​:<br></dd><ul><li></li><li>Free</li><li>Supports multiple applications/identity consumers</li><li>Supports multiple clients and client types</li><li>Supports OAuth/OIDC<br></li></ul><dd class="ssw15-rteElement-FigureBad"> Disadvantages​​:<br></dd><ul><li></li><li>Steep learning curve<br></li><li>No included MFA<br></li><li>Requires additional setup​<br></li></ul><div><div class="ms-rtestate-read ms-rte-embedcode ms-rte-embedil ms-rtestate-notify">
      <iframe width="760" height="428" src="https://www.youtube.com/embed/5OUQZAvxZuA?ecver=1" frameborder="0"></iframe> </div>
   <br>
</div><p class="ssw15-rteElement-P"> 
   <br> 
</p><p class="ssw15-rteElement-P"> 
   <b>Use this option if...</b><br></p><ul class="ssw15-rteElement-P"><li>You expect to support multiple clients (e.g. web, mobile etc), and/or:</li><li>​You expect to support multiple applications<br></li></ul><div> 
   <br> 
</div><h3>Active Directory (for Internal Enterprise Applications)<br></h3><p> 
   <a href="https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=14&cad=rja&uact=8&ved=2ahUKEwih5qiG2a_mAhU96XMBHXqUBF8QFjANegQIBhAB&url=https://docs.microsoft.com/en-us/windows-server/identity/ad-ds/get-started/virtual-dc/active-directory-domain-services-overview&usg=AOvVaw3F3S9r96_chfuRhAceNFE8">​Active Directory</a> has been the de facto enterprise identity store for most of the world for decades. Many organisations already have AD as it provides a lot of additional capability and is integrated with most of their existing enterprise applications. AD supports multiple authentication protocols, including: <br></p><ul><li>LDAP/LDAPS: simple to use but old tech, requires multiple queries to check permissions, roles not natively supported and need to be managed by groups.</li><li>Kerberos: Excellent experience for users as it provides a silent and transparent login. But is a difficult and complex protocol not well understood by many developers and requires complex and difficult setup for both the devs and the sysadmins.<br></li><li>ADFS/SAML: Modern application authentication against AD is done via ADFS with SAML. This is often extended through third party tools such as Okta to support applications that use JWT and claims.<br></li><li>Proprietary Microsoft: Basic, NTLM etc.​<br></li></ul><dd class="ssw15-rteElement-FigureGood">​​Advantages<br></dd><ul class="ssw15-rteElement-P"><li>​​Already in place in most enterprise organisations</li><li>Users do not require an additional identity</li><li>Can make the application compliant with the organisation's existing security policies​<br></li></ul><dd class="ssw15-rteElement-FigureBad">​Disadvantages<br></dd><ul class="ssw15-rteElement-P"><li>​​Not suited to external use</li><li>Can require a lot of setup to work well with company RBAC (e.g. AD groups for authorisation)</li><li>Will require significant developer work to make application roles work with AD groups (if required)</li><li>Not natively supported off-premises​</li><li>No MFA included<br></li></ul><div> 
   <strong>Use this option if...</strong><br></div><div><ul><li>Your application, domain controllers and clients are all on the same network, and:<br></li><li>You already have AD in place and have a security policy that states that all your users must authenticate against your centralised corporate identity, and/or:</li><li>You want to enable pass-through/silent authentication for your users​<br></li></ul></div><p></p><h3>Azure AD (for Internal Enterprise Applications)<br></h3><p> 
   <a href="https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&uact=8&ved=2ahUKEwiDsL6i2a_mAhXijOYKHR5WAh8QFjAAegQIAxAB&url=https://azure.microsoft.com/en-au/services/active-directory/&usg=AOvVaw3X8CyXRWZ1KOOeEVYx0ubs">Azure AD</a> is Microsoft's cloud based version of its traditional on-premises enterprise identity store - Active Directory. Azure AD is different in that it is fundamentally identity only (it doesn't provide endpoint and user management features such as Group Policy) and as such provides strong identity features not natively supported by AD, such as MFA and self-service password recovery. Being cloud based, it can authenticate users anywhere in the world (rather than just on-premises on corporate computers).​<br></p><dd class="ssw15-rteElement-FigureGood">​​Advantages<br></dd><ul class="ssw15-rteElement-P"><li>​​​Many organisations already have AAD</li><li>Extends existing enterprise identity to the cloud (i.e. is supported off-premises)</li><li>Can be used to ensure compliance with existing company security policies</li><li>MFA support included​<br></li></ul><dd class="ssw15-rteElement-FigureBad">​Disadvantages<br></dd><p class="ssw15-rteElement-P"></p><ul><li>​Not suited for external or consumer facing uses</li></ul> 
<strong>Use this option if...</strong><br><strong></strong> 
<p></p><ul class="ssw15-rteElement-P"><li>You want to support internal/enterprise users, and:</li><li>You already have Azure AD set up, and/or:</li><li>Your users require access from off-site, and/or:</li><li>You 
      <strong>need </strong>to enforce MFA​<br></li></ul><h3>Azure B2C (simple Auth as a Service)<br></h3><p> 
   <a href="https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&uact=8&ved=2ahUKEwiB4Nmz2a_mAhV14XMBHW6pC7sQFjAAegQIAxAB&url=https://azure.microsoft.com/en-in/services/active-directory-b2c/&usg=AOvVaw3lcpqnMW7GThYUAYNlGEQu">AAD B2C</a> sits on top of Azure AD and includes all the benefits it provides, as well as enabling consumer friendly features. These include integration with OAuth2/OIDC provider and more flexible/customisable login flows. B2C is well tailored to support authentication, and while it can be extended to support additional capabilities, this requires custom development.​<br></p><dd class="ssw15-rteElement-FigureGood">Advantages<br></dd><ul class="ssw15-rteElement-P"><li>Inexpensive and generous free tier</li><li>Native support for multiple OAuth2/OIDC providers</li><li>MFA support included</li><li>Relatively straightforward to setup</li><li>Ongoing security maintained by Microsoft<br></li></ul><dd class="ssw15-rteElement-FigureBad">​Disadvantages<br></dd><ul class="ssw15-rteElement-P"><li>​​Very limited flexibility</li><li>Can support roles and other extended functionality, but requires significant development​<br></li></ul><div> 
   <strong>Use this option if...</strong><br> 
   <ul><li>You want to support MFA, and/or:<br></li><li>Your users are external/consumers, and:</li><li>You anticipate a high volume of users, and/or:</li><li>You only require basic authentication and limited or no authorisation<br></li></ul></div><h3>Auth0 (sophisticated Auth as a Service)<br></h3><p> 
   <a href="https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&uact=8&ved=2ahUKEwjI2-PG2a_mAhXK7XMBHa6-CpAQFjAAegQIEBAC&url=https://auth0.com/&usg=AOvVaw1vSnM9ruwib43vxq4g0jjS">Auth0</a> is a commercial identity product aimed at developers. It is cloud hosted and offers out of the box functionality for user signup and login, self-service password recovery, OAuth2/OIDC integration, and other consumer and user friendly features. MFA is supported out of the box, and significant sophisticated functionality is available on the paid tiers.​<br></p><dd class="ssw15-rteElement-FigureGood">Advantages<br></dd><p class="ssw15-rteElement-P"></p><ul><li>Good free tier</li><li>Very easy to set up and use</li><li>MFA support included</li><li>Supports multiple OAuth2/OIDC providers</li><li>Significant extensibility​</li></ul><dd class="ssw15-rteElement-FigureBad">​Disadvantages<br></dd><ul class="ssw15-rteElement-P"><li>​Free tier is more limited in volume than competition (B2C)<br></li><li>Free tier only includes the basic functionality (same as B2C)<br></li><li>Free tier only supports 2 social identity providers​<br></li></ul><div> 
   <strong>Use this option if...</strong><br><strong></strong> 
   <ul><li>You want to enforce MFA, and/or:<br></li><li>Your users are external/consumers, and/or:</li><li>You require authorisation or complex authentication<br></li></ul></div><p></p><h3>Okta (for Commercial Enterprise Applications $)<br></h3><p> 
   <a href="https://www.okta.com/?utm_campaign=search_google_apac_anz_ao_it_branded-okta_exact&utm_medium=cpc&utm_source=google&utm_term=okta&utm_page=%7burl%7d&gclid=EAIaIQobChMI1PKg2tmv5gIVjCQrCh3RHAImEAAYASAAEgLW2fD_BwE">Okta</a> is a commercial identity product aimed at enterprises. Many enterprise-centric software products, for example Salesforce, have Okta connectors. Okta is intended to bridge the gap between enterprise authentication (such as AD) and modern software and SaaS products.​<br></p><dd class="ssw15-rteElement-FigureGood">​Advantages<br></dd><ul class="ssw15-rteElement-P"><li>​Integrates with anything</li><li>Very well supported in the enterprise</li><li>Can simplify integration with AD​<br></li></ul><dd class="ssw15-rteElement-FigureBad">​Disadvantages<br></dd><ul class="ssw15-rteElement-P"><li>​Expensive</li><li>No free tier</li><li>Not suited to consumer facing scenarios​<br></li></ul><div> 
   <strong>Use this option if...</strong><br> 
   <ul><li>Your application is for internal/enterprise users, and:</li><li>You already have Okta in place, and/or:</li><li>Your application is a product that you intend to commercialise (Okta is prevalent in the enterprise and having an Okta connector is a good selling point)​<br></li></ul></div><h3>Roll your own  - a solution looking for a problem :-) <br></h3><p>It is entirely possible to create a users table and a roles table in your database and create and manage users yourself.</p><dd class="ssw15-rteElement-FigureGood"> Advantages​​:<br></dd><ul><li>Developers feel like they're ninjas for a little while<br></li><li>Can be a quick and dirty solution to the absolute most basic situation<br></li></ul><dd class="ssw15-rteElement-FigureBad"> ​​Disadvantages:<br></dd><p></p><p></p><p>You have to reinvent the wheel:</p><p></p><ul><li> 
      <span style="background-color:initial;">Identity</span></li><li> 
      <span style="background-color:initial;">Roles</span></li><li> 
      <span style="background-color:initial;">Email verification</span></li><li> 
      <span style="background-color:initial;">Login/Signup/Password reset</span></li><li> 
      <span style="background-color:initial;">Claim</span><span style="background-color:initial;">s manag</span><span style="background-color:initial;">ement</span></li><li>Significant risk<br></li><li>High maintenance overhead<br></li><li>Masses of technical debt<br></li></ul><p></p>​<strong>Use this option if...</strong><br> 
<ul><li>You want a side project to learn more about how you might roll your own, but of course you know never intend to put it into production :-)​<br></li></ul>



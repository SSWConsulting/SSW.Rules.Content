---
seoDescription: Before upgrading to TFS 2012, it's crucial to back up your databases using a supported method to ensure data reliability.
type: rule
archivedreason:
title: Do you backup your databases for TFS 2012 migration?
guid: b72a8d91-b030-4522-8059-6daee855c6e6
uri: backup-your-databases-tfs2012-migration
created: 2021-12-07T02:58:08.000Z
authors:
  - title: Adam Cogan
    url: https://ssw.com.au/people/adam-cogan
related: []
redirects:
  - do-you-backup-your-databases1
lastUpdated: 2025-07-31T00:46:18.000Z
lastUpdatedBy: Brady Stroud [SSW]
lastUpdatedByEmail: bradystroud@ssw.com.au
createdBy: Tiago Araújo [SSW]
createdByEmail: tiagov8@gmail.com
isArchived: false
---

<introEmbed
  body={<>
Before starting your upgrade, you should back up all your TFS databases.

It's important that you backup TFS by using one of the supported methods, to ensure that you can reliably restore your data if needed.
  </>}
/>

<asideEmbed
  variant="greybox"
  body={<>
    **Tip:** The Team Foundation Server Team Foundation Server 2012 Update 2 and above has a built in Scheduled Backup tool which helps you to easily backup all TFS Databases. For versions prior to TFS 2012 Update 2 you have to use Backups tool from the [TFS Power Tools](https://marketplace.visualstudio.com/items?itemName=TFSPowerToolsTeam.MicrosoftVisualStudioTeamFoundationServer2012Power) package.
  </>}
  figureEmbed={{
    preset: "default",
    figure: "XXX",
    shouldDisplay: false
  }}
/>



<imageEmbed
  alt="Image"
  size="large"
  showBorder={false}
  figureEmbed={ {
    preset: "default",
    figure: "TFS Scheduled Backups Tool",
    shouldDisplay: true
  } }
  src="/uploads/rules/backup-your-databases-tfs2012-migration/tfs scheduled.jpg"
/>


In some cases you won't be able to use this tool e.g. with TFS 2012 Power Tools RTM. This version has a bug which causes a failure of Tfs_Configuration DB when you try to restore it.


<imageEmbed
  alt="Image"
  size="large"
  showBorder={false}
  figureEmbed={ {
    preset: "default",
    figure: "TFS Backup tool failed to restore the Tfs_Configuration DB – known bug in TFS 2012 Power Tools RTM",
    shouldDisplay: true
  } }
  src="/uploads/rules/backup-your-databases-tfs2012-migration/tfs backup.jpg"
/>


In such case you will have to manually backup databases. Make sure all relevant databases have been backed up. This includes all those starting with "Tfs\_"


<imageEmbed
  alt="Image"
  size="large"
  showBorder={false}
  figureEmbed={ {
    preset: "default",
    figure: "Backup all relevant databases",
    shouldDisplay: true
  } }
  src="/uploads/rules/backup-your-databases-tfs2012-migration/backup all.jpg"
/>



<asideEmbed
  variant="info"
  body={<>
    **Important:** Manual backup requires additional user steps which involve creation of additional tables and stored procedures. These tables has to be created to keep TFS databases in sync.

Follow this instructions to properly backup your databases: [Manually back up Team Foundation Server](https://docs.microsoft.com/en-us/azure/devops/server/admin/backup/manually-backup-tfs?view=azure-devops-2020&viewFallbackFrom=azure-devops&WT.mc_id=DOP-MVP-33518).
  </>}
  figureEmbed={{
    preset: "default",
    figure: "XXX",
    shouldDisplay: false
  }}
/>



<imageEmbed
  alt="Image"
  size="large"
  showBorder={false}
  figureEmbed={ {
    preset: "default",
    figure: "Add tbl_TfsTransactionLogMark table to every Tfs_* Database",
    shouldDisplay: true
  } }
  src="/uploads/rules/backup-your-databases-tfs2012-migration/add tbl.jpg"
/>



<imageEmbed
  alt="Image"
  size="large"
  showBorder={false}
  figureEmbed={ {
    preset: "default",
    figure: "Add sp_SetTransactionLogMark stored procedure to every Tfs_* Database",
    shouldDisplay: true
  } }
  src="/uploads/rules/backup-your-databases-tfs2012-migration/add spset.jpg"
/>


If you manually backup the TFS Databases make sure you add additional jobs that execute 1 minute before the backup kick off.


<imageEmbed
  alt="Image"
  size="large"
  showBorder={false}
  figureEmbed={ {
    preset: "default",
    figure: "Add additional jobs to SQL Server Agent",
    shouldDisplay: true
  } }
  src="/uploads/rules/backup-your-databases-tfs2012-migration/add additional.jpg"
/>


Make sure you back up the Reporting Services database if you'd like your reports to come across as well.

For Reporting Services make sure you have backed up the encryption key.


<imageEmbed
  alt="Image"
  size="large"
  showBorder={false}
  figureEmbed={ {
    preset: "default",
    figure: "Backup Reporting Services encryption keys",
    shouldDisplay: true
  } }
  src="/uploads/rules/backup-your-databases-tfs2012-migration/backup reporting.jpg"
/>

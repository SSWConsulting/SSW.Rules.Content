---
authors:
- title: Matt Wicks
  url: https://ssw.com.au/people/matt-wicks
- title: Aman Kumar
  url: https://ssw.com.au/people/aman-kumar
created: 2023-10-10 10:33:21+00:00
guid: bcb27bdf-9553-48e1-9a36-45ac327bdd06
related:
- rule: public/uploads/rules/enterprise-secrets-in-pipelines/rule.mdx
seoDescription: Mask secrets from GitHub Actions logs by using the add-mask workflow
  command to prevent accidental exposure.
title: Do you know how to mask secrets from GitHub Actions logs?
categories:
  - category: categories/project-delivery/rules-to-better-devops-using-github.mdx
type: rule
uri: mask-secrets-in-github-actions
---

When working with GitHub Actions, there are instances where we need to pull a secret value from a CLI tool and use it within our workflow.

However, this practice can inadvertently expose the secret in the GitHub Actions logs if not handled securely. To prevent such exposure, it is crucial to redact the secret from the logs using the add-mask workflow command provided by GitHub.

This command ensures that the secret value is replaced with asterisks (\*\*\*\*) in the logs, thereby preventing any unintended disclosure of the secret.

<endIntro />

**Example:**

Consider the scenario where we need to retrieve a secret from Azure Key Vault (there is no pre-built action to do this from Microsoft) and use it in our GitHub Actions workflow. In the following bad example, the secret is exposed in the logs:

```yaml

- name: keyVault - Secrets
        shell: pwsh
        id: KeyVaultSecrets
        run: |

        $GoogleRecaptchaSiteKey = (az keyvault secret show --name Google-Recaptcha-Site-KEY --vault-name $&#123;&#123; env.KEY_VAULT&#125;&#125; --query value -o tsv)
        echo "GoogleRecaptchaSiteKey=$GoogleRecaptchaSiteKey" >> $env:GITHUB_OUTPUT

```

<imageEmbed
  alt="Image"
  size="large"
  showBorder={false}
  figurePrefix="bad"
  figure="Bad example - The secret is exposed in the GitHub logs"
  src="/uploads/rules/mask-secrets-in-github-actions/secret-without-add-mask.png"
/>


```yaml
- name: keyVault - Secrets
        shell: pwsh
        id: KeyVaultSecrets
        run: |

        $GoogleRecaptchaSiteKey = (az keyvault secret show --name Google-Recaptcha-Site-KEY --vault-name $&#123;&#123; env.KEY_VAULT&#125;&#125; --query value -o tsv)
        echo "::add-mask::$GoogleRecaptchaSiteKey"

        echo "GoogleRecaptchaSiteKey=$GoogleRecaptchaSiteKey" >> $env:GITHUB_OUTPUT

```

<imageEmbed
  alt="Image"
  size="large"
  showBorder={false}
  figurePrefix="good"
  figure="Good example - The secret is masked in the GitHub logs"
  src="/uploads/rules/mask-secrets-in-github-actions/secret-with-add-mask.png"
/>


For further details on masking secrets in logs, refer to the [GitHub documentation](https://docs.github.com/en/actions/using-workflows/workflow-commands-for-github-actions#masking-a-value-in-a-log).

This method ensures that while you can still use the secret within your workflow, it remains masked in the logs, mitigating the risk of accidental secret exposure.
---
archivedreason: null
authors:
- title: Adam Cogan
  url: https://ssw.com.au/people/adam-cogan
categories:
- category: categories/software-engineering/rules-to-better-sql-server-schema-deployment.mdx
created: 2009-10-08 11:27:09+00:00
createdBy: JayLin
createdByEmail: JayLin@sydney.ssw.com.au
guid: 03c90188-ef1c-4ecf-a58f-32f1a331de42
isArchived: false
lastUpdated: 2024-06-08 03:27:17+00:00
lastUpdatedBy: Brady Stroud [SSW]
lastUpdatedByEmail: bradystroud@ssw.com.au
redirects: []
seoDescription: Developers should not worry about idempotency when scripting database
  changes, as scripts should be run in order to ensure correct results and identify
  any errors that may occur.
title: Do you ignore Idempotency?
type: rule
uri: do-you-ignore-idempotency
---

Many developers worry about Idempotency. They make sure that their scripts can run multiple times without it affecting the database, upon subsequent running of the script.

This usually involves a check at the start to see if the object exists or not.
E.g. If this table exists, then don't create the table.

Seems popular, seems like a good idea, right? Wrong! And here is why.

<endIntro />

Database scripts should be run in order (into separate sequential files), as per the rule [Do you script out all changes?](/script-out-all-changes)

Therefore developers should not worry about idempotency, as the script will run in the order it was created. Actually, if they are doing this, then **they want to see the errors**. It means that the database is not in the state that they expect.

```sql
IF EXISTS (SELECT 1 FROM
               INFORMATION_SCHEMA.TABLES
           WHERE
               TABLE_TYPE='BASE TABLE' AND
               TABLE_NAME='Employees'
           )
    ALTER TABLE [dbo].[Employees]( …… ) ON [PRIMARY]
ELSE
    CREATE TABLE [dbo].[Employees]( …… ) ON [PRIMARY]
```
**❌ Bad example – worrying about the idempotency should not be done, if you plan to run your scripts in the order they were created**  

```sql
CREATE TABLE [dbo].[Employees](
    ……
) ON [PRIMARY]
```
**✅ Good example – not worrying about the idempotency. If errors occur we don’t want them to be hidden + it is easier to read**  


<imageEmbed
  alt="Image"
  size="large"
  showBorder={false}
  figurePrefix="none"
  figure="Viagra isn't the cure to your Idempotency problems"
  src="/uploads/rules/do-you-ignore-idempotency/ViagraPill.jpg"
/>


See the concept of [Idempotence on Wikipedia](http://en.wikipedia.org/wiki/Idempotence)